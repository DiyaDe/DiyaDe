# è·å–åšå®¢æœ€æ–°æ–‡ç« 
# å‚è€ƒï¼šhttps://github.com/CCKNBC/CCKNBC
# Actions1ï¼šhttps://github.com/marketplace/actions/delete-workflow-runs
# Actions2ï¼šhttps://github.com/marketplace/actions/blog-post-workflow
name: update blog

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:

  build:
    runs-on: ubuntu-latest
    env:
      TZ: Asia/Shanghai

    steps:
    - uses: actions/checkout@v3

    # feed_list å¿…å¡« rssåœ°å€
    # max_post_count å¿…å¡« è·å–æ–‡ç« æ•°
    # reade_path é€‰å¡« é»˜è®¤å†™å…¥READ.me
    # template é€‰å¡« ç”Ÿæˆæ¨¡ç‰ˆ emojikeyéšæœºè¡¨æƒ… é»˜è®¤ä¸º[$title]($url)
    # date_format é€‰å¡« ä¿®æ”¹æ¨¡ç‰ˆä¸­æ—¥æœŸæ ¼å¼ é»˜è®¤è‹±æ–‡ 
    # committer_usernameå’Œcommitter_email é€‰å¡« æäº¤ä¿¡æ¯
    # filter_dates é€‰å¡« daysAgo/10/ä»£è¡¨åªè·å–è¿‘10å¤©åšæ–‡ ï¼Œ currentMonthåªè·å–å½“æœˆåšæ–‡ï¼Œ currentYearåªè·å–å½“å¹´åšæ–‡
    - uses: gautamkrishnar/blog-post-workflow@master
      with:
        feed_list: "https://luomengguo.top/atom.xml"
        max_post_count: 5
        readme_path: "./README.md"
        template: "$newline - $emojiKey(ğŸ’¯,ğŸ”¥,ğŸ’«,ğŸš€,ğŸŒ®,ğŸ’«) $date [$title]($url)"
        date_format: "yyyyå¹´mmæœˆddæ—¥"
        committer_username: "github-actions[bot]"
        committer_email: "github-actions[bot]@users.noreply.github.com"
        filter_dates: "currentYear"
        
    # åˆ é™¤è¿‘retain_dayså¤©çš„æ—¥å¿—ï¼Œå¯ä»¥ä¸è¦
    # - name: Delete Workflow Runs
    #   uses: Mattraks/delete-workflow-runs@main
    #   with:
    #     retain_days: 10
    #     keep_minimum_runs: 1
